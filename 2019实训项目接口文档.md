# 2019实训项目接口文档

## 1.login

说明：用户登录，监测用户登录状态

链接：/login

输入参数:

| 意义     | 用户邮箱 | 密码     | 验证码 |
| -------- | -------- | -------- | ------ |
| 名称     | email    | password | code   |
| 数据类型 | String   | String   | String |

返回参数：

| Reason（小写） | 登录成功 | 用户名或密码错误 | 验证码错误 | 用户已登录 |
| -------------- | -------- | ---------------- | ---------- | ---------- |
| success        | 200      | 201              | 202        | 203        |

成功后，设置session

| 意义 | 登录标志 | 用户id | 用户身份 |
| ---- | -------- | ------ | -------- |
| 名称 | islogin  | id     | statues  |
| 值   | true     | String | String   |

## 2.register

说明：用户注册接口，成功后通过邮件发送注册链接，用户注册成功后会受到一封激活链接的邮箱

链接：/register

参数：

| 意义     | 用户名   | 用户ID（不可修改） | 邮箱   |
| -------- | -------- | ------------------ | ------ |
| 名称     | userName | userId             | email  |
| 数据类型 | String   | String             | String |

| 意义     | 密码     | 重复密码   | 验证码 |
| -------- | -------- | ---------- | ------ |
| 名称     | password | repassword | code   |
| 数据类型 | String   | String     | String |

| 意义     | 部门ID | 部门名称 | 性别   | 身份              |
| -------- | ------ | -------- | ------ | ----------------- |
| 名称     | Did    | Dname    | sex    | statues(默认员工) |
| 数据类型 | String | String   | String | String            |

返回值：

| Reason（小写） | 注册成功 | 邮件未发送 | 用户已经存在 | 验证码错误 | 密码不匹配 |
| -------------- | -------- | ---------- | ------------ | ---------- | ---------- |
| success        | 200      | 201        | 202          | 203        | 204        |

## 3. applicants

说明：申请

链接：/applicant

参数：

| 意义     | 用户id | 目的地 | 出发时间 | 预算   |
| -------- | ------ | ------ | -------- | ------ |
| 名称     | id     | Aplace | Atime    | Amoney |
| 数据类型 | String | String | String   | String |

| 意义     | 部门名称 | 原因1    | 紧急   | 原因2   |
| -------- | -------- | -------- | ------ | ------- |
| 名称     | Dname    | Areason1 | Urgent | Areason |
| 数据类型 | String   | String   | String | String  |

| 意义     | 原因2    | 原因3    | 申请标号      |      |
| -------- | -------- | -------- | ------------- | ---- |
| 名称     | Areason2 | Areason3 | Aid(自动生成) |      |
| 数据类型 | String   | String   | String        |      |

返回值

成功：

```json
{"success"：ture}
```

失败：

```json
{"success"：false}
```

## 4 . check

说明：检查输入的验证码是否正确，并修改密码（改进：可以随机生成密码，邮箱发送）~~我太懒不想做~~

链接：/check

参数：

| 意思     | 邮箱验证码 | 新密码      | 用户id          |
| -------- | ---------- | ----------- | --------------- |
| 名称     | recode     | newpassword | id(Session获取) |
| 数据类型 | String     | String      | String          |

返回值：

| Reason（小写） | 修改成功 | 修改失败 | 验证码错误 |
| -------------- | -------- | -------- | ---------- |
| success        | 200      | 201      | 202        |

## 5. getcode

说明：获得图片验证码

链接：/getcode

参数：无

返回值：图片

## 6. logout

说明：用户退出当前账户

参数：从session获取islogin

操作：删除session中的 islogin，id，statues

返回值：无

## 7. 重置密码